# subscribe-quote
订阅行情数据

通过程序订阅股票实时数据，例如如下命令可订阅 SH600000 股票实时数据
```
./tstClient SH600000
```
数据信息包括当前K线的开高低收、当前盘口的5档数据等等

例如，如下命令可订阅标普500指数
```
./tstClient IXSPX
```

输出如下，注意 c: 一列是不断变化的
```
loopForever tid 139796787160896
ThreadProc tid 139796787156736
on_connect: Connection Accepted.
sub rc 0
Packet ID 1: The topic has been subscribed.
1657209963 IXSPX 3845.080078
o:3858.850098 h:3892.790039 l:3858.850098 ~c:3891.290039~ v:820534784.000000 a:0.000000
bp1:0.000000 bp2:0.000000 bp3:0.000000 bp4:0.000000 bp5:0.000000
bv1:0.000000 bv2:0.000000 bv3:0.000000 bv4:0.000000 bv5:0.000000
cnt:0 neipan:0.000000 limitUp:0.000000 limitDown:0.000000 position: 0.000000 avPrice:0.000000 temp2: 3891.919922
1657209964 IXSPX 3845.080078
o:3858.850098 h:3892.790039 l:3858.850098 ~c:3891.260010~ v:820574656.000000 a:0.000000
bp1:0.000000 bp2:0.000000 bp3:0.000000 bp4:0.000000 bp5:0.000000
bv1:0.000000 bv2:0.000000 bv3:0.000000 bv4:0.000000 bv5:0.000000
cnt:0 neipan:0.000000 limitUp:0.000000 limitDown:0.000000 position: 0.000000 avPrice:0.000000 temp2: 3891.919922
1657209965 IXSPX 3845.080078
o:3858.850098 h:3892.790039 l:3858.850098 ~c:3891.290039~ v:820660800.000000 a:0.000000
bp1:0.000000 bp2:0.000000 bp3:0.000000 bp4:0.000000 bp5:0.000000
bv1:0.000000 bv2:0.000000 bv3:0.000000 bv4:0.000000 bv5:0.000000
cnt:0 neipan:0.000000 limitUp:0.000000 limitDown:0.000000 position: 0.000000 avPrice:0.000000 temp2: 3891.919922
```

```
./tstClient SH600000
loopForever tid 140474494990144
ThreadProc tid 140474494985984
on_connect: Connection Accepted.
sub rc 0
Packet ID 1: The topic has been subscribed.
1657243881 SH600000 7.870000
o:7.900000 h:7.900000 l:7.880000 c:7.890000 v:8653.000000 a:6831320.000000
bp1:7.880000 bp2:7.870000 bp3:7.860000 bp4:7.850000 bp5:7.840000
bv1:345.000000 bv2:2526.000000 bv3:5171.000000 bv4:4805.000000 bv5:773.000000
cnt:500 neipan:2529.000000 limitUp:8.660000 limitDown:7.080000 position: 0.000000 avPrice:0.000000 temp2: 0.000000
1657243884 SH600000 7.870000
o:7.900000 h:7.900000 l:7.880000 c:7.890000 v:8659.000000 a:6836054.000000
bp1:7.880000 bp2:7.870000 bp3:7.860000 bp4:7.850000 bp5:7.840000
bv1:438.000000 bv2:2526.000000 bv3:5221.000000 bv4:4805.000000 bv5:773.000000
cnt:502 neipan:2529.000000 limitUp:8.660000 limitDown:7.080000 position: 0.000000 avPrice:0.000000 temp2: 0.000000
1657243887 SH600000 7.870000
o:7.900000 h:7.900000 l:7.880000 c:7.890000 v:8672.000000 a:6846311.000000
bp1:7.880000 bp2:7.870000 bp3:7.860000 bp4:7.850000 bp5:7.840000
bv1:443.000000 bv2:2536.000000 bv3:5221.000000 bv4:4813.000000 bv5:773.000000
cnt:504 neipan:2529.000000 limitUp:8.660000 limitDown:7.080000 position: 0.000000 avPrice:0.000000 temp2: 0.000000
```

## Linux 下编译方法
在 ubuntu 18.04 验证通过

* 编译

安装依赖包
```
sudo apt-get install libmosquitto-dev zlib1g-dev
```

编译
```
cd sub-quote-cpp
cmake .
make
```

* 运行
```
./tstClient
```

## Python 运行方法

先自行准备 Python 环境，假定命令行中可运行 python3 pip3

* 安装依赖包

```
cd sub-quote-py
pip3 install -r requirements.txt
```

* 运行程序

```
python3 main.py 
Connected to MQTT Broker!
Received 144 -> 144 from quote/SH000001 topic
trace解压后: SH000001
1657253826 SH000001 3364.399902
o:3380.370000 h:3386.310000 l:3357.500000 c:3370.280000 v:204063264.000000 a:270726660096.000000
bp1:0.000000 bp2:0.000000 bp3:0.000000 bp4:0.000000 bp5:0.000000
bv1:24935332.000000 bv2:0.000000 bv3:0.000000 bv4:0.000000 bv5:0.000000
cnt:0 neipan:0.000000 limitUp:3700.840088 limitDown:3027.959961 position: 0.000000 avPrice:0.000000 temp2: 0.000000
Received 144 -> 144 from quote/SH000001 topic
trace解压后: SH000001
1657253829 SH000001 3364.399902
o:3380.370000 h:3386.310000 l:3357.500000 c:3370.280000 v:204063264.000000 a:270726660096.000000
bp1:0.000000 bp2:0.000000 bp3:0.000000 bp4:0.000000 bp5:0.000000
bv1:24935332.000000 bv2:0.000000 bv3:0.000000 bv4:0.000000 bv5:0.000000
cnt:0 neipan:0.000000 limitUp:3700.840088 limitDown:3027.959961 position: 0.000000 avPrice:0.000000 temp2: 0.000000
Received 144 -> 144 from quote/SH000001 topic
trace解压后: SH000001
1657253832 SH000001 3364.399902
o:3380.370000 h:3386.310000 l:3357.500000 c:3370.280000 v:204063264.000000 a:270726660096.000000
bp1:0.000000 bp2:0.000000 bp3:0.000000 bp4:0.000000 bp5:0.000000
bv1:24935332.000000 bv2:0.000000 bv3:0.000000 bv4:0.000000 bv5:0.000000
cnt:0 neipan:0.000000 limitUp:3700.840088 limitDown:3027.959961 position: 0.000000 avPrice:0.000000 temp2: 0.000000
```

* 注意
默认体验密码和服务器地址都已经在程序中固定，有需求可以联系我们获取独立的用户名密码
